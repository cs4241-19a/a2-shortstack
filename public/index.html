<!doctype html>
<html lang="en">
<head>
    <title>Ren√© Borner CS4241 Assignment 2</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="https://reneborner.de/favicon.ico">
    <meta charset="utf-8">
    <script src="js/Chart.min.js"></script>
    <script src=https://cdn.jsdelivr.net/npm/fetch-json@2.2/dist/fetch-json.min.js></script>
</head>
<body>
<h1>
    <img class="profile"
         src="images/noteLogo.png"
         alt="
     avatar">
    <br>
    Hi I'm your notes app!
</h1>
<div id="notesContainer"></div>
<!-- maybe do something with graphJS? -->
<form action="">
    <input type="text" id="inputText" placeholder="Text" value="test">
    <input type="text" onfocus="(this.type='date')" id="inputDate" placeholder="Due">
    <button>Save</button>
</form>
<script>
    const submit = function (e) {
        // prevent default form action from being carried out
        e.preventDefault()
        const inputText = document.getElementById( 'inputText' ).value
        const inputDate = document.getElementById( 'inputDate' ).value
        const json = {Note: inputText, Date: inputDate}
        const body = JSON.stringify(json)
        fetchJson.post('/submit', json)
            .then(handleData)
            .catch(console.error);
    }
    const handleData = function (data) {
        const myNode = document.getElementById("notesContainer");
        while (myNode.firstChild) {
            myNode.removeChild(myNode.firstChild);
        }
        data.forEach(function(item, index, array){
            let note = document.createElement("p")
            note.innerHTML = item.Note + " " + item.Date
            document.getElementById("notesContainer").appendChild(note)
        })
    }
    window.onload = function () {
        const button = document.querySelector('button')
        button.onclick = submit
    }
</script>
</body>
</html>
