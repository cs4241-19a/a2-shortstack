<!doctype html>
<html lang="en">
  <head>
    <title>CS4241 Assignment 2</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://unpkg.com/wingcss"/>
<!--     <link rel="stylesheet" href="../public/css/style.css"> -->
  </head>
  <body>


<!--       <table border="1">
        <tr>       
          <th >Login</th>         
        </tr>
        <tr>
          <td>Username:<input id="username" onkeyup="checkInput()"></td>
        </tr>
        <tr>
          <td>Password:<input id="password" type="password" onkeyup="checkInput()"></td>        
        </tr>
        <tr>
          <td><button id="submit" disabled="true" >Login</button></td>     
        </tr>
      </table> -->
      
<section class="container center">
  
     <div>
       
  
 
      <h4 class="header">Login</h4>

  <div class="row ">Username:<input type="text" placeholder="Username" id="username" ></div>

  <div class="row">Password:<input type="password" placeholder="Password" id="password"  ></div>

  <div class="row "><button id="login" onclick="login()" class="outline" >Login</button> <button id="register" class="outline" onclick="register()">Register</button></div>      
    </div>
    
</section>

  
  
    
  </body>
  <script>

  const login = function(e){
    
    let username = document.getElementById( 'username' ).value
  let password = document.getElementById( 'password' ).value
  //send session info here
  let json = { username: username, password: password}

  let body = JSON.stringify(json)
  //let body = URL

  fetch( '/login', {
      headers: {
            'Content-Type': 'application/json',
      },
      method:'POST',
      body: body
    }).then(function (response) {
        console.log(response)
        if (response.redirected){
            window.location = response.url
        }
    })

}
  
  
  
    const register = function(e){
    
const regInfor ={
    username:document.getElementById( 'username' ).value,
    password:document.getElementById( 'password' ).value
  }
  const body = JSON.stringify(regInfor);

    fetch( '/register', {
      method:'POST',
      body 
    })
   
  }
    


  window.onload = function() {
   
    
      const registerButton = document.getElementById( 'register' );
    registerButton.onclick = register();
    
    const loginButton = document.getElementById( 'login' );
    loginButton.onclick = login;
    
    
  }
    
    
  


  </script>
</html>
