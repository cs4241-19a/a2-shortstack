<!doctype html>
<html lang="en">
  <head>
    <title>CS4241 Assignment 2</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/scripts.js"></script>
    <meta charset="utf-8">
  </head>
  <body>
    <nav>
      <ul>
        <li><button onclick="displayNewForm()">Add New</button></li>
        <li><button onclick="displayModForm()">Modify Existing</button></li>
        <li><button onclick="displayData()">View Data</button></li>
      </ul>
    </nav>
    <div id="newForm" style="display: none">
      <form action="" class="NEW" id="NEW">
        <legend>Add New Entry</legend>
        <label for="fName">First Name:</label>
        <input type="text" class="fName" value="your name here"><br>
        <label for="lName">Last Name: Name</label>
        <input type="text" class="lName" value="your name here"><br>
        <label for="month">Month of birth</label>
        <select name="month" class="month">
          <option value="January">January</option>
          <option value="February">February</option>
          <option value="March">March</option>
          <option value="April">April</option>
          <option value="May">May</option>
          <option value="June">June</option>
          <option value="July">July</option>
          <option value="August">August</option>
          <option value="September">September</option>
          <option value="October">October</option>
          <option value="Novemeber">November</option>
          <option value="Decemeber">December</option>
        </select>
        <br>
        <label for="days">Day of Birth</label>
        <select name="days" class="days">  
        </select>
        <br>
        <div class="Buttons">
          <button id="subButton">submit</button>
        </div>
      </form>
    </div>
    <div id="modForm" style="display: none">
      <form action="">
        <legend>MODIFY AN EXISTING ENTRY          </legend>
        <label for="modList">Select a line to modify</label>
        <select name="modList" class="modList">
        </select>
        <br>
        <div class="Buttons">
        </div>
    </form>
    </div>
    <div id="Container">
    </div>
  </body>
  <script>

  const submit = function( e ) {
    // prevent default form action from being carried out
    e.preventDefault()
    let valInput = []
    valInput.push(document.querySelector( '.fName' ).value)
    valInput.push(document.querySelector( '.lName' ).value)
    valInput.push(document.querySelector( '.month' ).value)
    valInput.push(document.querySelector( '.days' ).value)
    const json = { fName: valInput[0], lName: valInput[1], month: valInput[2], day: valInput[3] },
          body = JSON.stringify( json )

    fetch( '/submit', {
      method:'POST',
      body
    })
    .then( function( response) {
      // do something with the reponse
      //display horoscope on screen
     response.text()
      .then(function(message){
       console.log(message)
     })
      
    })
    return false
  }
  
  //Changes information in database to given
  const submitChanges = function(e){
    e.preventDefault()
    let originalData = document.getElementById('modHolder').innerHTML
    console.log(originalData)
    console.log(JSON.parse(originalData))
    let newInput = []
    newInput.push(document.querySelector( '.fNameE' ).value)
    newInput.push(document.querySelector( '.lNameE' ).value)
    newInput.push(document.querySelector( '.monthE' ).value)
    newInput.push(document.querySelector( '.daysE' ).value)
    let modBod = {original: originalData, modData: newInput}
    modBod = JSON.stringify(modBod)
    console.log(modBod)
    fetch( '/modify', {
      method:'POST',
      modBod
    }) 
    .then( function( response) {
      // do something with the reponse
      //display horoscope on screen
     response.text()
      .then(function(message){
       console.log(message)
     })
      
    })
    /*e.preventDefault()
    let originalData = document.getElementById('modHolder').innerHTML
    console.log(originalData)
    console.log(JSON.parse(originalData))
    let newInput = []
    newInput.push(document.querySelector( '.fNameE' ).value)
    newInput.push(document.querySelector( '.lNameE' ).value)
    newInput.push(document.querySelector( '.monthE' ).value)
    newInput.push(document.querySelector( '.daysE' ).value)
    var body = originalData
    fetch( '/delete', {
      method:'POST',
      body
    })
    .then( function( response) {
      // do something with the reponse
      //display horoscope on screen
     response.text()
      .then(function(message){
       console.log(message)
     })
      
    })
    const jsonNew = { fName: newInput[0], lName: newInput[1], month: newInput[2], day: newInput[3] }
    body = JSON.stringify( jsonNew )
    console.log(body)
    fetch( '/submit', {
      method:'POST',
      body
    })
    .then( function( response) {
      // do something with the reponse
      //display horoscope on screen
     response.text()
      .then(function(message){
       console.log(message)
     })
      
    })
    return false*/
  }

  //Deletes value from database
  const remove = function(e){
    e.preventDefault()
    let originalData = document.getElementById('modHolder').value
    const jsonOriginal = { fName: originalData[0], lName: originalData[1], month: originaData[2], day: originalData[3] },
          body = JSON.stringify( jsonOriginal )
    /*let valInput = []
    valInput.push(document.querySelector( '.fNameE' ).value)
    valInput.push(document.querySelector( '.lNameE' ).value)
    valInput.push(document.querySelector( '.month' ).value)
    valInput.push(document.querySelector( '.days' ).value)
    const json = { fName: valInput[0], lName: valInput[1], month: valInput[2], day: valInput[3] },
          body = JSON.stringify( json )*/
    fetch( '/delete', {
      method:'POST',
      body
    })
    .then( function( response) {
      // do something with the reponse
      //display horoscope on screen
     response.text()
      .then(function(message){
       console.log(message)
     })
      
    })
    return false
  }
  
  
  
    //Assign Button Functions On Load
    window.onload = function() {
      const subButton = document.querySelector( '#subButton' )
      subButton.onclick = submit
    }
  
  </script>
</html>