<!doctype html>
<html lang="en">
  <head>
    <title>CS4241 Assignment 2</title>
    <meta charset="utf-8">
  </head>
  <body>
    <form action="">
      <label for="fName">First Name:</label>
      <input type="text" id="fName" value="your name here"><br>
      <label for="lName">Last Name: Name</label>
      <input type="text" id="lName" value="your name here"><br>
      <label for="day">Day of Birth</label>
      <select name="Days" id="day">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
        <option value="13">13</option>
        <option value="14">14</option>
        <option value="15">15</option>
        <option value="16">16</option>
        <option value="17">17</option>
        <option value="18">18</option>
        <option value="19">19</option>
        <option value="20">20</option>
        <option value="21">21</option>
        <option value="22">22</option>      
        <option value="23">23</option>
        <option value="24">24</option>
        <option value="25">25</option>
        <option value="26">26</option>
        <option value="27">27</option>
        <option value="28">28</option>
        <option value="29">29</option>
        <option value="30">30</option>
        <option value="31">31</option>   
      </select><br>
      <label for="month">Month of birth</label>
      <select name="Month" id="month">
        <option value="January">January</option>
        <option value="February">February</option>
        <option value="March">March</option>
        <option value="April">April</option>
        <option value="May">May</option>
        <option value="June">June</option>
        <option value="July">July</option>
        <option value="August">August</option>
        <option value="September">September</option>
        <option value="October">October</option>
        <option value="Novemeber">November</option>
        <option value="Decemeber">December</option>
      </select><br>
      <div class="Buttons">
        <button id="subButton">submit</button>
        <button id="printAllButton">Print All</button>
      </div>
    </form>
    <div id="Containter">
      
    </div>
  </body>
  <script>

  const submit = function( e ) {
    // prevent default form action from being carried out
    e.preventDefault()
    let valInput = []
    valInput.push(document.querySelector( '#fName' ).value)
    valInput.push(document.querySelector( '#lName' ).value)
    valInput.push(document.querySelector( '#day' ).value)
    valInput.push(document.querySelector( '#month' ).value)
    //const input = document.querySelector( '#yourname' ),
    const json = { fName: valInput[0], lName: valInput[1], day: valInput[2], month: valInput[3] },
          body = JSON.stringify( json )

    fetch( '/submit', {
      method:'POST',
      body 
    })
    .then( function( response ) {
      // do something with the reponse
      //display horoscope on screen
      console.log( response )
      console.log(response.toString())
    })

    return false
  }
  
  //Print all info in database
  const printAll = function(e){
    console.log("PRINTING")
  // prevent default form action from being carried out
    e.preventDefault()

    fetch( '/printAll', {
      method:'GET',
    })
    .then( function( response ) {
      console.log(response)
      console.log(response.type)
      displayData(response)
    })

    return false
  }
  
  
  function displayData(response){
    var node = document.createElement("P")
    var t = document.createTextNode(response)
    node.appendChild(t)
    document.body.appendChild(t)
  }
    
  function updateDatabseDisplayTable(data){
    var html = "<table><th>Existing Data</th>"
    html += "<tr><td>Index</td><td>First Name></td><td>Last Name</td><td>Day of Birth</td><td>Month of Birth</td><td>Sign</td></tr>"
    for(let i = 0; i< data.length(); i++){
      html += "<tr>" 
      for( let j = 0; j < 6; j++){
        html += "<td>" + data[i][j] + "</td>"
      }
      html +="</tr>"
    }
    html += "</table>"
    
    document.getElementByID("Containter").innerHTML = html
  }
  
  

  window.onload = function() {
  const subButton = document.querySelector( '#subButton' )
   subButton.onclick = submit
  const printAllButton = document.querySelector( '#printAllButton' )
   printAllButton.onclick = printAll
  }

  </script>
</html>
