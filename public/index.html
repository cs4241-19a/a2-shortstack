<!doctype html>
<html lang="en">
  <head>
    <title>CS4241 Assignment 2</title>
    <link rel = "stylesheet" href = "css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@600&display=swap" rel="stylesheet"> 
    <meta charset="utf-8">
  </head>
  <body>
    <h1>Pico Fermi Bagel Range : 1000 - 9999</h1>
    <form>
    <div class = "grid">
        <div class = "gridItem1a">
          <ul>
            <li class = "listItem">Hint Mode</li>
            <li><input type = "radio" id = "hc" name= "mode" value="hotcold">Hot / Cold</li>
            <li><input type = "radio" id = "pfb" name= "mode" value = "picofermibagel">Pico Fermi Bagel</li>
          </ul>
          <!-- Mode -->
        </div>
        <div class = "gridItem1b">
          <ul>
            <li class = "listItem">Guess</li>
            <li class = "listItem"><input type = "text" class = "textfield" id = "guess"></li>
          </ul>
          <!-- Guess -->
        </div>
        <div class = "gridItem2a">
          <button class = "button2" id = "ruleSwap">Rules</button>
          <!-- Submit -->
        </div>
        <div class = "gridItem2b">
          <button id = "start">Submit guess</button>
        </div>
        <div class = "gridItem3">
           <h1 id = "result">Result : </h1>
        </div>
    </div>
    </form>
  </body>
  <script>

  const submit = function( e ) {
    // prevent default form action from being carried out
    e.preventDefault()

    const mode = document.getElementById( '.mode' ).value,
          guess = document.querySelector( '.guess' ).value, 
          json = { mode : mode.value, guess : guess.value},
          body = JSON.stringify( json )

    fetch( '/submit', {
      method:'POST',
      body 
    })
    .then( function( response ) {
      let result = JSON.parse(response);
      document.getElementById('result').innerHTML = "Result : " + result;
      console.log( response )
    })

    return false
  }

  window.onload = function() {
    const button = document.querySelector( 'start' )
    button.onclick = submit
  }

  </script>
</html>
