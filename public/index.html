<!doctype html>
<html lang="en">
  <head>
    <title>CS4241 Assignment 2</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://unpkg.com/wingcss"/>
<!--     <link rel="stylesheet" href="../public/css/style.css"> -->
  </head>
  <body>

<section class="container center">

     <div>
      <h4 class="header">Login</h4>

  <div class="row ">Username:<input type="text" placeholder="Username" id="username" ></div>

  <div class="row">Password:<input type="password" placeholder="Password" id="password"  ></div>

  <div class="row "><button id="login" onclick="login()" class="outline" >Login</button> <button id="register" class="outline" onclick="register()">Register</button></div>
    </div>
</section>

  </body>
  <script>

  const login = function(e){
    
    let username = document.getElementById( 'username' ).value
  let password = document.getElementById( 'password' ).value
  //send session info here
  let json = { username: username, password: password}

  let body = JSON.stringify(json)
  //let body = URL

  fetch( '/login', {
      headers: {
            'Content-Type': 'application/json',
      },
      method:'POST',
      body: body
    }).then(function (response) {
        console.log(response)
        if (response.redirected){
            window.location = response.url
        //  window.open(response.url, "newwindow", "height=100, width=400, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, status=no")&nbsp;
        }
    })

}

    const register = function(e){
    
const regInfor ={
    username:document.getElementById( 'username' ).value,
    password:document.getElementById( 'password' ).value
  }
  const body = JSON.stringify(regInfor);

    fetch( '/register', {
      method:'POST',
      body 
    })
   
  }

  window.onload = function() {
      const registerButton = document.getElementById( 'register' );
    registerButton.onclick = register();
    
    const loginButton = document.getElementById( 'login' );
    loginButton.onclick = login;
  }
    
    
  


  </script>
</html>
