<!doctype html>
<html lang="en">
  <head>
    <title>CS4241 Assignment 2</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/scripts.js"></script>
    <meta charset="utf-8">
  </head>
  <body>
    <nav>
      <ul>
        <li><button onclick="displayNewForm()">Add New</button></li>
        <li><button onclick="displayModForm()">Modify Existing</button></li>
        <li><button id="viewButton">View Data</button></li>
      </ul>
    </nav>
    <div id="newForm" style="display: none">
      <form action="" class="NEW" id="NEW">
        <legend>Add New Entry</legend>
        <label for="fName">First Name:</label>
        <input type="text" class="fName" value="your name here"><br>
        <label for="lName">Last Name: Name</label>
        <input type="text" class="lName" value="your name here"><br>
        <label for="month">Month of birth</label>
        <select name="month" class="month">
          <option value="January">January</option>
          <option value="February">February</option>
          <option value="March">March</option>
          <option value="April">April</option>
          <option value="May">May</option>
          <option value="June">June</option>
          <option value="July">July</option>
          <option value="August">August</option>
          <option value="September">September</option>
          <option value="October">October</option>
          <option value="Novemeber">November</option>
          <option value="Decemeber">December</option>
        </select>
        <br>
        <label for="days">Day of Birth</label>
        <select name="days" class="days">  
        </select>
        <br>
        <div class="Buttons">
          <button id="subButton">submit</button>
          <button id="printAllButton">Print All</button>
        </div>
      </form>
    </div>
    <div id="modForm" style="display: none">
      <form action="">
        <legend>MODIFY AN EXISTING ENTRY          </legend>
        <label for="modList">Select a line to modify</label>
        <select name="modList" class="modList">
        </select>
        <br>
        <div class="Buttons">
        </div>
    </form>
    </div>
    
    <div id="Container">
      
    </div>
  </body>
  <script>

  const submit = function( e ) {
    // prevent default form action from being carried out
    e.preventDefault()
    let valInput = []
    valInput.push(document.querySelector( '.fName' ).value)
    valInput.push(document.querySelector( '.lName' ).value)
    valInput.push(document.querySelector( '.month' ).value)
    valInput.push(document.querySelector( '.day' ).value)
    const json = { fName: valInput[0], lName: valInput[1], month: valInput[2], day: valInput[3] },
          body = JSON.stringify( json )

    fetch( '/submit', {
      method:'POST',
      body
    })
    .then( function( response) {
      // do something with the reponse
      //display horoscope on screen
     response.text()
      .then(function(message){
       console.log(message)
     })
      
    })
    return false
  }
  
  
  //Print all info in database
  const printAll = function(e){
    console.log("PRINTING")
  // prevent default form action from being carried out
    e.preventDefault()

    fetch( '/getData', {
      method:'GET',
    })
    .then( function( response ) {
      console.log(response)
      response.text()
      .then(function(message){
       let allData = JSON.parse(message)
       console.log(allData)
       updateDatabaseDisplayTable(allData)
     })
    })
    return false
  }
  
  
  function displayData(response){
    var node = document.createElement("P")
    var t = document.createTextNode(response)
    node.appendChild(t)
    document.body.appendChild(t)
  }
  
    //Assign Button Functions On Load
    window.onload = function() {
      const subButton = document.querySelector( '#subButton' )
      subButton.onclick = submit
      const printAllButton = document.querySelector( '#printAllButton' )
     printAllButton.onclick = printAll
    }
  
  </script>
</html>

<!--
<label for="fName">First Name: </label>
      <input type="text" class="fName"><br>
      <label for="lName">Last Name: </label>
      <input type="text" class="lName"><br>
      <label for="day">Day of Birth</label>
      <select name="Days" class="day">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
        <option value="13">13</option>
        <option value="14">14</option>
        <option value="15">15</option>
        <option value="16">16</option>
        <option value="17">17</option>
        <option value="18">18</option>
        <option value="19">19</option>
        <option value="20">20</option>
        <option value="21">21</option>
        <option value="22">22</option>      
        <option value="23">23</option>
        <option value="24">24</option>
        <option value="25">25</option>
        <option value="26">26</option>
        <option value="27">27</option>
        <option value="28">28</option>
        <option value="29">29</option>
        <option value="30">30</option>
        <option value="31">31</option>   
      </select><br>
      <label for="month">Month of birth</label>
      <select name="Month" class="month">
        <option value="January">January</option>
        <option value="February">February</option>
        <option value="March">March</option>
        <option value="April">April</option>
        <option value="May">May</option>
        <option value="June">June</option>
        <option value="July">July</option>
        <option value="August">August</option>
        <option value="September">September</option>
        <option value="October">October</option>
        <option value="Novemeber">November</option>
        <option value="Decemeber">December</option>
      </select><br>
-->