<!doctype html>
<html lang="en">

<head>
  <title>CS4241 Assignment 2</title>
  <meta charset="utf-8">
</head>

<body>
  <header>CS Clicker</header>

  <!--Interactive Area-->
  <div id="main_area">
    <div>
      <p id='counter'>0</p>
      <button type="button" id="clicker">Add Line of Code</button>
    </div>
    <div>
      <form id="form1" action="submit">
        <fieldset>
          <legend>Store</legend>
          <p class="store_item">
            <label for='cursors'>Cursors: </label>
            <input type='text' id='cursors' value="0">
          </p>
          <p class="store_item">
            <label for='hobbyists'>Hobbyists: </label>
            <input type='text' id='hobbyists' value="0">
          </p>
          <p class="store_item">
            <label for='cs_maj'>CS Majors: </label>
            <input type='text' id='cs_maj' value="0">
          </p>
          <p class="store_item">
            <label for='soft_eng'>Software Engineers: </label>
            <input type='text' id='soft_eng' value="0">
          </p>
          <p class="store_item">
            <label for='server_farm'>Server Farms: </label>
            <input type='text' id='server_farm' value="0">
          </p>
          <p class="store_item">
            <label for='quantum'>Quantum Computers: </label>
            <input type='text' id='quantum' value="0">
          </p>
        <button type="button" id='purchase'>Purchase</button>
        </fieldset>
      </form>
    </div>
  </div>

  <!-- Table of Values -->
  <section>
    <table>
      <tr>
        <th>Type</th>
        <th>Cost (loc)</th>
        <th>Speed (loc/s)</th>
        <th>Number Purchased</th>
      </tr>
      <tr>
        <td>Cursor</td>
        <td>15</td>
        <td>1</td>
        <td>0</td>
      </tr>
      <tr>
        <td>Hobbyist</td>
        <td>100</td>
        <td>10</td>
        <td>0</td>
      </tr>
      <tr>
        <td>CS Major</td>
        <td>1200</td>
        <td>30</td>
        <td>0</td>
      </tr>
      <tr>
        <td>Software Engineer</td>
        <td>13000</td>
        <td>50</td>
        <td>0</td>
      </tr>
      <tr>
        <td>Server Farm</td>
        <td>30000</td>
        <td>70</td>
        <td>0</td>
      </tr>
      <tr>
        <td>Quantum Computer</td>
        <td>100000</td>
        <td>110</td>
        <td>0</td>
      </tr>
    </table>
  </section>
  <div>
    <button type="button" id="results_button">View Results</button>
  </div>
</body>
<script>

  let counter = 0;

  const incrementCounter = function(e) {
    const currentLOC = document.getElementById('counter');
    counter = Number(currentLOC.innerHTML) + 1
    currentLOC.innerHTML = counter;
  }

  const submit = function (e) {
    // prevent default form action from being carried out
    e.preventDefault()

    const cursors = document.querySelector('#cursors'),
      hobbyists = document.querySelector('#hobbyists'),
      csMajors = document.querySelector('#cs_maj'),
      softEng = document.querySelector('#soft_eng')
      server = document.querySelector('#server_farm'),
      quantum = document.querySelector('#quantum'),
      currentLOC = document.getElementById('counter'),
      json = { cursors: cursors.value,
        hobbyists: hobbyists.value,
        csMajors: csMajors.value,
        softEng: softEng.value,
        server: server.value,
        quantum: quantum.value,
        currentLOC: currentLOC.innerHTML},
      body = JSON.stringify(json)

    fetch('/submit', {
      method: 'POST',
      body
    })
      .then(function (response) {
        // do something with the reponse 
        console.log(response)
      })

    return false
  }

  window.onload = function () {
    const button = document.getElementById('purchase')
    button.onclick = submit

    const incButton = document.getElementById('clicker')
    incButton.onclick = incrementCounter
  }

</script>

</html>